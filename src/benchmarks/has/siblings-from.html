<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Test</title>
	<style>
		.from ~ :has(~ .to) {
			outline: 1px solid red;
		}
	</style>
	<script type="module">
		import PerfTestRunner from '/lib/PerfTestRunner.js';

		const $container = document.querySelector('#container');
		const $from = document.querySelector('#from');

		window.startTest = () =>
			new Promise((resolve, reject) => {
				PerfTestRunner.measureRunsPerSecond({
					description: 'Create a sibling scope using :has(), toggling from',
					run: function () {
						$from.classList.toggle("from");
						$container.offsetHeight; // force recalc style
						$from.classList.toggle("from");
						$container.offsetHeight; // force recalc style
					},
					done: resolve,
				});
			});
	</script>
</head>
<body>
	<div id="container">
		<ul>
			<li>outside</li>
			<li class="from" id="from">from</li>
			<li>in-between</li>
			<li>in-between</li>
			<li>in-between</li>
			<li>in-between</li>
			<li>in-between</li>
			<li>in-between</li>
			<li>in-between</li>
			<li>in-between</li>
			<li>in-between</li>
			<li>in-between</li>
			<li>in-between</li>
			<li>in-between</li>
			<li>in-between</li>
			<li>in-between</li>
			<li>in-between</li>
			<li>in-between</li>
			<li>in-between</li>
			<li>in-between</li>
			<li>in-between</li>
			<li>in-between</li>
			<li class="to" id="to">to</li>
			<li>outside</li>
		</ul>
	</div>
</body>
</html>
